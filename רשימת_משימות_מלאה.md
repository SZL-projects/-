# רשימת משימות מלאה - מערכת CRM לניהול צי לוג ידידים

**גרסה:** 3.22.0
**תאריך עדכון אחרון:** 03/01/2026
**מזכיר צי לוג ידידים:** שלמה זלמן לרנר

---

## 📊 סיכום סטטוס הפרויקט

### מבנה טכנולוגי קיים:
- **Backend**: Node.js + Express + MongoDB/Firestore
- **Frontend**: React 18 + Vite + Material-UI
- **אימות**: JWT + bcryptjs
- **מודלים קיימים**: User, Rider, Vehicle, Assignment, Fault, Maintenance, MonthlyCheck, Task, InsuranceClaim, AuditLog
- **Routes קיימות**: auth, riders, vehicles, faults, monthly-checks, tasks (כולל גרסאות Firebase)

### סטטיסטיקה:
- **סה"כ משימות**: 115
- **הושלמו**: ~35 (30%)
- **נותרו**: ~80 (70%)

---

## 📋 רשימת משימות מפורטת

### **א. Backend - מודלים ו-Validation** (10 משימות)

#### 1. ✅ מודל User
**סטטוס**: הושלם
**תיאור**: מודל משתמש עם תפקידים (Super Admin, מנהל, מזכיר, לוגיסטיקה, רוכב)

#### 2. ✅ מודל Rider
**סטטוס**: הושלם
**תיאור**: מודל רוכב עם ולידציות ת"ז וטלפון

#### 3. ✅ מודל Vehicle
**סטטוס**: הושלם
**תיאור**: מודל כלי עם ולידציות מספר רישוי

#### 4. ✅ מודל Assignment
**סטטוס**: הושלם
**תיאור**: שיוך רוכב-כלי עם מניעת שיוך כפול

#### 5. ✅ מודל MonthlyCheck
**סטטוס**: הושלם
**תיאור**: בקרה חודשית

#### 6. ✅ מודל Fault
**סטטוס**: הושלם
**תיאור**: תקלות עם סטטוסים

#### 7. ✅ מודל Maintenance
**סטטוס**: הושלם חלקית
**פרטים**:
- [x] מבנה בסיסי
- [ ] שדה "עלות טיפול כוללת" (חובה בסגירה)
- [ ] חיבור מלא למודול תביעות ביטוח

#### 8. ✅ מודל Task
**סטטוס**: הושלם
**תיאור**: משימות עם חיבור לישויות

#### 9. ✅ מודל InsuranceClaim
**סטטוס**: הושלם
**תיאור**: תביעות ביטוח

#### 10. ✅ מודל AuditLog
**סטטוס**: הושלם
**תיאור**: לוג ביקורת עם רישום IP ושינויים

#### 11. ❌ מודל Equipment
**סטטוס**: לא הושלם
**עדיפות**: גבוהה
**תיאור**:
- ציוד אישי (קסדה, מעיל, כפפות, חליפת סערה, אפוד, דיבורית)
- ציוד סיוע (בוסטר, קומפרסור, שרשרת, מנעולים, ג'קים, בוקסות)
- ניהול מלאי מחסן
- תנועות (נמסר/הוחזר/חסר)
- התראות על חוסרים

#### 12. ❌ מערכת ניהול קילומטראז' מתקדמת
**סטטוס**: לא הושלם
**עדיפות**: גבוהה
**תיאור**:
- בקרת ירידה בק"מ (דורש הסבר חובה)
- בקרת קפיצה חריגה (מעל X ק"מ ביום - ערך להגדרה)
- עריכה ישירה רק למנהל-על עם רישום מודגש בלוג
- שמירת היסטוריית כל שינוי
- התראות אוטומטיות

#### 13. ❌ מודל FormBuilder
**סטטוס**: לא הושלם
**עדיפות**: בינונית
**תיאור**:
- יצירת/עריכת/שכפול טפסים דינמיים
- סוגי שדות: טקסט, מספר, תאריך, בחירה, Checkbox, קישור, חתימה
- ולידציות מובנות (ת"ז, טלפון, טווחים)
- Drag & Drop לסידור שדות
- הגדרת זמינות (מי רואה, טווחי זמן)
- יצירת Permlink לכל טופס

#### 14. ❌ מודל EmailTemplate
**סטטוס**: לא הושלם
**עדיפות**: בינונית
**תיאור**:
- תבניות מיילים ניתנות לעריכה (HTML)
- ניהול גרסאות (אפשרות חזרה לגרסה קודמת)
- תבניות: "ברוך הבא", "קישורים חשובים", התראות שונות
- שדות דינמיים (שם רוכב, מספר כלי וכו')

#### 15. ❌ הוספת שדות "הערות פנימיות למנהל-על"
**סטטוס**: לא הושלם
**עדיפות**: נמוכה
**תיאור**:
- שדה נסתר במודלים: Rider, Vehicle, InsuranceClaim
- גלוי רק למנהל-על
- לא מוצג לשאר המשתמשים

#### 16. ❌ מודל ArchiveData
**סטטוס**: לא הושלם
**עדיפות**: נמוכה
**תיאור**:
- טבלאות נפרדות לנתונים מעל 24 חודשים
- שמירת היסטוריה מלאה
- אפשרות חיפוש ושחזור

#### 17. ❌ מודל Notification
**סטטוס**: לא הושלם
**עדיפות**: גבוהה
**תיאור**:
- התראות in-app + email
- תצורה ניתנת לעריכה (מי מקבל מה)
- סטטוס: נשלח/נקרא/לא נקרא
- סוגי אירועים: תקלה חדשה, תקלה חמורה, טיפול, תביעה, בקרה חודשית, תוקפים

#### 18. ❌ מודל SystemHealth
**סטטוס**: לא הושלם
**עדיפות**: בינונית
**תיאור**:
- סטטוס שירותי מייל
- סטטוס API חיצוניים
- עומס שרתים
- סטטוס גיבוי אחרון
- רשימת שגיאות אחרונות

#### 19. ❌ מודל RegionalPermissions
**סטטוס**: לא הושלם
**עדיפות**: בינונית
**תיאור**:
- שיוך מנהלים למחוזות
- אכיפה בצד השרת (לא רק UI)
- בדיקת הרשאות לכל פעולה

#### 20. ❌ השלמת מודל Maintenance
**סטטוס**: חלקי
**עדיפות**: גבוהה
**תיאור**:
- הוספת שדה "עלות טיפול כוללת" (חובה)
- חיבור מלא למודול תביעות ביטוח
- מעקב אחר קבלות (קישורי Drive)

---

### **ב. Backend - API Endpoints** (35 משימות)

#### 21. 🟡 API רוכבים
**סטטוס**: חלקי
**עדיפות**: גבוהה
**נדרש**:
- [x] GET /riders (רשימה בסיסית)
- [ ] GET /riders?search=... (חיפוש מתקדם בת"ז, טלפון, שם)
- [x] GET /riders/:id
- [x] POST /riders (יצירה)
- [ ] PUT /riders/:id (עדכון מלא)
- [ ] DELETE /riders/:id (מחיקה לוגית)
- [ ] GET /riders/:id/history (היסטוריית שינויים)
- [ ] GET /riders/:id/vehicles (היסטוריית כלים)

#### 22. 🟡 API כלים
**סטטוס**: חלקי
**עדיפות**: גבוהה
**נדרש**:
- [x] GET /vehicles (רשימה בסיסית)
- [ ] GET /vehicles?search=... (חיפוש מתקדם)
- [x] GET /vehicles/:id
- [x] POST /vehicles
- [ ] PUT /vehicles/:id
- [ ] PATCH /vehicles/:id/km (עדכון ק"מ עם בקרת חריגות)
- [ ] DELETE /vehicles/:id (מחיקה לוגית)
- [ ] GET /vehicles/:id/history
- [ ] PUT /vehicles/:id/status (שינוי סטטוס: פעיל/תקול/גנוב/מושבת)

#### 23. ❌ API שיוכים
**סטטוס**: לא הושלם
**עדיפות**: גבוהה מאוד
**נדרש**:
- [ ] POST /assignments (יצירת שיוך + מניעת כפילויות)
- [ ] PUT /assignments/:id/end (סיום שיוך + בדיקת ציוד)
- [ ] GET /assignments/rider/:riderId/current (שיוך נוכחי)
- [ ] GET /assignments/vehicle/:vehicleId/current
- [ ] GET /assignments/rider/:riderId/history
- [ ] GET /assignments/vehicle/:vehicleId/history

#### 24. 🟡 API בקרה חודשית
**סטטוס**: חלקי
**עדיפות**: גבוהה
**נדרש**:
- [x] GET /monthly-checks (רשימה בסיסית)
- [ ] GET /monthly-checks/pending (ממתינות למילוי)
- [ ] GET /monthly-checks/overdue (באיחור)
- [x] GET /monthly-checks/:id
- [ ] POST /monthly-checks/:id/submit (מילוי ע"י רוכב)
- [ ] GET /monthly-checks/rider/:riderId (בקרות של רוכב ספציפי)
- [ ] GET /monthly-checks/statistics (סטטיסטיקות למנהלים)

#### 25. 🟡 API תקלות
**סטטוס**: חלקי
**עדיפות**: גבוהה מאוד
**נדרש**:
- [ ] POST /faults (פתיחת תקלה ע"י רוכב)
- [x] GET /faults (רשימה)
- [ ] GET /faults/open (תקלות פתוחות)
- [ ] GET /faults/critical (תקלות חמורות)
- [ ] GET /faults/:id
- [ ] PUT /faults/:id/approve (אישור ע"י מנהל)
- [ ] PUT /faults/:id/reject (דחייה)
- [ ] PUT /faults/:id/status (שינוי סטטוס)
- [ ] PUT /faults/:id/close (סגירה)
- [ ] GET /faults/vehicle/:vehicleId
- [ ] GET /faults/rider/:riderId

#### 26. ❌ API טיפולים
**סטטוס**: לא הושלם
**עדיפות**: גבוהה
**נדרש**:
- [ ] POST /maintenance (פתיחת טיפול ע"י רוכב)
- [ ] GET /maintenance (רשימה)
- [ ] GET /maintenance/:id
- [ ] PUT /maintenance/:id (השלמת פרטים ע"י מנהל - סכומים, קבלות)
- [ ] POST /maintenance/:id/complete (סגירת טיפול)
- [ ] GET /maintenance/vehicle/:vehicleId
- [ ] GET /maintenance/rider/:riderId
- [ ] GET /maintenance/linked-to-fault/:faultId

#### 27. 🟡 API משימות
**סטטוס**: חלקי
**עדיפות**: בינונית
**נדרש**:
- [x] GET /tasks (רשימה)
- [ ] GET /tasks/my-tasks (משימות לפי תפקיד המשתמש)
- [ ] POST /tasks (יצירה ידנית)
- [ ] PUT /tasks/:id/status (שינוי סטטוס)
- [ ] PUT /tasks/:id/assign (שיוך למשתמש)
- [ ] DELETE /tasks/:id
- [ ] GET /tasks/rider/:riderId
- [ ] GET /tasks/vehicle/:vehicleId

#### 28. ❌ API ציוד ומלאי
**סטטוס**: לא הושלם
**עדיפות**: גבוהה
**נדרש**:
- [ ] GET /equipment/personal/rider/:riderId (ציוד אישי של רוכב)
- [ ] PUT /equipment/personal/rider/:riderId (עדכון סטטוס)
- [ ] GET /equipment/support/vehicle/:vehicleId (ציוד סיוע של כלי)
- [ ] PUT /equipment/support/vehicle/:vehicleId
- [ ] GET /equipment/warehouse (מלאי מחסן)
- [ ] POST /equipment/warehouse/transaction (רישום תנועה)
- [ ] GET /equipment/warehouse/alerts (התראות חסרים)

#### 29. ❌ API תביעות ביטוח
**סטטוס**: לא הושלם
**עדיפות**: בינונית
**נדרש**:
- [ ] GET /insurance-claims (רשימה)
- [ ] POST /insurance-claims (יצירת תביעה חדשה)
- [ ] GET /insurance-claims/:id
- [ ] PUT /insurance-claims/:id (עדכון)
- [ ] PUT /insurance-claims/:id/status (שינוי סטטוס)
- [ ] POST /insurance-claims/:id/add-conversation (הוספת שיחה/עדכון)
- [ ] GET /insurance-claims/vehicle/:vehicleId
- [ ] GET /insurance-claims/rider/:riderId

#### 30. ❌ API Form Builder
**סטטוס**: לא הושלם
**עדיפות**: נמוכה
**נדרש**:
- [ ] GET /forms (רשימת טפסים)
- [ ] POST /forms (יצירת טופס חדש)
- [ ] GET /forms/:id
- [ ] PUT /forms/:id (עדכון)
- [ ] DELETE /forms/:id
- [ ] POST /forms/:id/clone (שכפול)
- [ ] GET /forms/:id/permlink (קישור קבוע)

#### 31. ❌ API תבניות מיילים
**סטטוס**: לא הושלם
**עדיפות**: בינונית
**נדרש**:
- [ ] GET /email-templates (רשימה)
- [ ] GET /email-templates/:id
- [ ] PUT /email-templates/:id (עריכה)
- [ ] GET /email-templates/:id/versions (גרסאות)
- [ ] POST /email-templates/:id/revert/:versionId (חזרה לגרסה)
- [ ] POST /email-templates/:id/preview (תצוגה מקדימה)

#### 32. ❌ API התראות
**סטטוס**: לא הושלם
**עדיפות**: גבוהה
**נדרש**:
- [ ] GET /notifications (התראות של המשתמש המחובר)
- [ ] GET /notifications/unread (לא נקראו)
- [ ] PUT /notifications/:id/mark-read (סימון כנקרא)
- [ ] PUT /notifications/mark-all-read
- [ ] DELETE /notifications/:id
- [ ] POST /notifications/test (שליחת התראת בדיקה - למנהל-על)

#### 33. ❌ API Impersonation
**סטטוס**: לא הושלם
**עדיפות**: בינונית
**נדרש**:
- [ ] POST /admin/impersonate/:userId (התחלת התחזות)
- [ ] POST /admin/stop-impersonate (סיום התחזות)
- [ ] GET /admin/impersonation-log (לוג כל ההתחזויות)

#### 34. ❌ API נעילת חשבונות
**סטטוס**: לא הושלם
**עדיפות**: בינונית
**נדרש**:
- [ ] PUT /admin/users/:id/lock (נעילת חשבון)
- [ ] PUT /admin/users/:id/unlock (שחרור נעילה)
- [ ] GET /admin/users/locked (רשימת חשבונות נעולים)

#### 35. ❌ API דשבורד בריאות מערכת
**סטטוס**: לא הושלם
**עדיפות**: נמוכה
**נדרש**:
- [ ] GET /admin/system-health (סטטוס כללי)
- [ ] GET /admin/system-health/mail-service
- [ ] GET /admin/system-health/apis
- [ ] GET /admin/system-health/servers
- [ ] GET /admin/system-health/backups
- [ ] GET /admin/system-health/errors (שגיאות אחרונות)

#### 36. ❌ API ארכיון
**סטטוס**: לא הושלם
**עדיפות**: נמוכה
**נדרש**:
- [ ] GET /archive/search (חיפוש בארכיון)
- [ ] POST /archive/restore/:type/:id (שחזור מארכיון)
- [ ] GET /archive/statistics (סטטיסטיקות)

#### 37. ❌ API דוחות
**סטטוס**: לא הושלם
**עדיפות**: בינונית
**נדרש**:
- [ ] GET /reports/monthly-checks (דוח בקרה חודשית)
- [ ] GET /reports/faults (דוח תקלות)
- [ ] GET /reports/maintenance (דוח טיפולים)
- [ ] GET /reports/insurance-claims (דוח תביעות)
- [ ] GET /reports/financial (דוח פיננסי - סכומי טיפולים)
- [ ] GET /reports/export/:type (ייצוא לCSV/Excel)

#### 38. ❌ API Audit Log
**סטטוס**: לא הושלם
**עדיפות**: בינונית
**נדרש**:
- [ ] GET /audit-logs (רשימה למנהל-על)
- [ ] GET /audit-logs/entity/:type/:id (לוג לישות ספציפית)
- [ ] GET /audit-logs/user/:userId (פעולות של משתמש)
- [ ] GET /audit-logs/export (ייצוא)

#### 39. ❌ API חיפוש גלובלי
**סטטוס**: לא הושלם
**עדיפות**: גבוהה מאוד
**נדרש**:
- [ ] GET /search?q=... (חיפוש בת"ז, טלפון, מס' רישוי, שם)
- [ ] GET /search/suggestions?q=... (הצעות אוטומטיות)

#### 40. ❌ API צ'קליסט רוכב חדש
**סטטוס**: לא הושלם
**עדיפות**: בינונית
**נדרש**:
- [ ] GET /riders/:id/onboarding-checklist (רשימת פריטים)
- [ ] PUT /riders/:id/onboarding-checklist/:itemId (סימון פריט כהושלם)
- [ ] POST /riders/:id/send-welcome-email (שליחת "ברוך הבא")
- [ ] POST /riders/:id/send-important-links (שליחת קישורים חשובים)

#### 41. ❌ API טפסים ספציפיים
**סטטוס**: לא הושלם
**עדיפות**: גבוהה
**נדרש**:
- [ ] POST /forms/vehicle-return (טופס החזרת כלי)
- [ ] POST /forms/accident-theft (טופס תאונה/גניבה)
- [ ] POST /forms/equipment-loan (טופס השאלת ציוד)
- [ ] GET /forms/vehicle-return/:vehicleId (טופס אחרון)

#### 42. ❌ API הרשאות אזוריות
**סטטוס**: לא הושלם
**עדיפות**: בינונית
**נדרש**:
- [ ] GET /admin/regional-permissions (הגדרות נוכחיות)
- [ ] PUT /admin/users/:id/regions (עדכון מחוזות של מנהל)
- [ ] GET /regions (רשימת כל המחוזות)

#### 43. ❌ API גיבויים
**סטטוס**: לא הושלם
**עדיפות**: בינונית
**נדרש**:
- [ ] POST /admin/backup/manual (גיבוי ידני)
- [ ] GET /admin/backup/list (רשימת גיבויים)
- [ ] POST /admin/backup/restore/:backupId (שחזור)
- [ ] DELETE /admin/backup/:backupId

#### 44. ❌ API תזכורות WhatsApp
**סטטוס**: לא הושלם
**עדיפות**: נמוכה
**נדרש**:
- [ ] GET /monthly-checks/whatsapp-reminders (רשימת רוכבים לתזכורת)
- [ ] POST /tasks/whatsapp-reminder/:taskId (תזכורת למשימה)
- [ ] GET /whatsapp/template (טקסט מוכן)

#### 45. ❌ API סטטיסטיקות Dashboard
**סטטוס**: לא הושלם
**עדיפות**: גבוהה
**נדרש**:
- [ ] GET /dashboard/kpis (מספרי KPI)
- [ ] GET /dashboard/charts/faults-by-month (גרף תקלות)
- [ ] GET /dashboard/charts/maintenance-costs (גרף עלויות)
- [ ] GET /dashboard/charts/vehicles-status (גרף סטטוסי כלים)
- [ ] GET /dashboard/upcoming-expirations (תוקפים שמסתיימים)

#### 46. ❌ API ניהול משתמשים (Admin)
**סטטוס**: לא הושלם
**עדיפות**: גבוהה
**נדרש**:
- [ ] GET /admin/users (רשימה)
- [ ] POST /admin/users (יצירת משתמש)
- [ ] PUT /admin/users/:id (עדכון)
- [ ] PUT /admin/users/:id/role (שינוי תפקיד)
- [ ] PUT /admin/users/:id/permissions (הרשאות)
- [ ] PUT /admin/users/:id/password (שינוי סיסמה)
- [ ] DELETE /admin/users/:id (מחיקה/הקפאה)

#### 47. ❌ API אימות והרשאות
**סטטוס**: חלקי
**עדיפות**: גבוהה מאוד
**נדרש**:
- [x] POST /auth/login
- [x] POST /auth/register
- [ ] POST /auth/logout
- [ ] POST /auth/refresh-token
- [ ] POST /auth/forgot-password (איפוס דרך מנהל)
- [ ] POST /auth/change-password
- [ ] GET /auth/me (פרטי המשתמש המחובר)

#### 48. ❌ API קישורי Drive
**סטטוס**: לא הושלם
**עדיפות**: בינונית
**נדרש**:
- [ ] POST /drive/validate-link (ולידציה של קישור)
- [ ] GET /drive/file-info/:linkId (מידע על קובץ)

#### 49. ❌ API היסטוריית שינויים
**סטטוס**: לא הושלם
**עדיפות**: בינונית
**נדרש**:
- [ ] GET /history/:entityType/:entityId (היסטוריה לישות)
- [ ] GET /history/field/:entityType/:entityId/:fieldName (היסטוריה לשדה)

#### 50. ❌ API מחיקות
**סטטוס**: לא הושלם
**עדיפות**: בינונית
**נדרש**:
- [ ] DELETE /:entity/:id (מחיקה לוגית עם אזהרה)
- [ ] POST /:entity/:id/restore (שחזור מחיקה)
- [ ] DELETE /admin/:entity/:id/permanent (מחיקה קבועה - למנהל-על)

#### 51. ❌ API סטטוסי כלים
**סטטוס**: לא הושלם
**עדיפות**: גבוהה
**נדרש**:
- [ ] PUT /vehicles/:id/mark-stolen (סימון כגנוב)
- [ ] PUT /vehicles/:id/mark-faulty (סימון כתקול)
- [ ] PUT /vehicles/:id/mark-unrideable (לא כשיר לרכיבה)
- [ ] GET /vehicles/:id/suggest-actions (הצעת פעולות לפי סטטוס)

#### 52. ❌ API תוקפים
**סטטוס**: לא הושלם
**עדיפות**: בינונית
**נדרש**:
- [ ] GET /expirations/upcoming (רשימת תוקפים קרובים)
- [ ] GET /expirations/expired (פקעו)
- [ ] PUT /vehicles/:id/insurance (עדכון ביטוח)
- [ ] PUT /vehicles/:id/license (עדכון רישיון)
- [ ] PUT /riders/:id/driver-license (עדכון רישיון נהיגה)

#### 53. ❌ API קילומטראז'
**סטטוס**: לא הושלם
**עדיפות**: גבוהה
**נדרש**:
- [ ] PUT /vehicles/:id/km (עדכון עם בקרה)
- [ ] GET /vehicles/:id/km-history (היסטוריה)
- [ ] GET /vehicles/:id/km-anomalies (חריגות)
- [ ] PUT /vehicles/:id/km-override (דריסה למנהל-על)

#### 54. ❌ API הכשרות
**סטטוס**: לא הושלם
**עדיפות**: נמוכה
**נדרש**:
- [ ] GET /riders/:id/trainings (רשימת הכשרות)
- [ ] POST /riders/:id/trainings (הוספת הכשרה)
- [ ] DELETE /riders/:id/trainings/:trainingId

#### 55. ❌ API תיקיות Drive
**סטטוס**: לא הושלם
**עדיפות**: נמוכה
**נדרש**:
- [ ] GET /riders/:id/drive-folders (קישורים לתיקיות)
- [ ] GET /vehicles/:id/drive-folders
- [ ] PUT /riders/:id/drive-folders (עדכון)

---

### **ג. Backend - Middleware ו-Services** (10 משימות)

#### 56. 🟡 Middleware - אימות JWT
**סטטוס**: הושלם חלקית
**עדיפות**: גבוהה מאוד
**נדרש**:
- [x] בדיקת Token
- [ ] Refresh Token
- [ ] בדיקת תוקף
- [ ] טיפול בהתחברות מרובה

#### 57. ❌ Middleware - הרשאות מתקדמות
**סטטוס**: לא הושלם
**עדיפות**: גבוהה מאוד
**תיאור**:
- בדיקת תפקידים (Super Admin, מנהל, מזכיר, לוגיסטיקה, רוכב)
- אכיפת הרשאות אזוריות בשרת (לא רק UI)
- חסימת גישה לנתונים ממחוז אחר דרך URL/API
- בדיקת Impersonation (רישום בלוג מודגש)
- רישום ניסיונות גישה לא מורשים

#### 58. ❌ Middleware - Audit Log אוטומטי
**סטטוס**: לא הושלם
**עדיפות**: גבוהה
**תיאור**:
- רישום אוטומטי לכל שינוי משמעותי
- שמירת ערך קודם → ערך חדש
- רישום IP, User-Agent
- תמיכה בשדה "הסבר חובה" (לדוגמה בשינוי ק"מ, מחיקות)
- רישום פעולות מנהל-על בנפרד

#### 59. ❌ Middleware - טיפול בשגיאות בעברית
**סטטוס**: לא הושלם
**עדיפות**: גבוהה
**תיאור**:
- הודעות ברורות בעברית (לא קודים טכניים)
- ללא stacktrace למשתמש קצה
- רישום שגיאות ל-log פנימי
- שגיאות 400/401/403/404/500 עם הודעות מותאמות

#### 60. ❌ Middleware - Rate Limiting
**סטטוס**: לא הושלם
**עדיפות**: בינונית
**תיאור**:
- הגבלת בקשות ל-API (למשל 100 בקשות לדקה)
- מניעת Brute Force על Login
- הודעה ברורה למשתמש

#### 61. ❌ Service - מערכת מיילים
**סטטוס**: לא הושלם
**עדיפות**: גבוהה
**תיאור**:
- שליחת מיילים מתבניות (EmailTemplate)
- תמיכה ב-HTML
- שדות דינמיים (שם רוכב, מספר כלי וכו')
- רישום שליחות מוצלחות/כושלות
- ניסיון חוזר במקרה כשל

#### 62. ❌ Service - התראות
**סטטוס**: לא הושלם
**עדיפות**: גבוהה
**תיאור**:
- יצירת התראה in-app + email
- ניתוב לפי תפקיד (מי מקבל מה)
- רשימת התראות לא נקראות
- התראות קריטיות (SMS/WhatsApp עתידי)

#### 63. ❌ Service - וולידציות מתקדמות
**סטטוס**: לא הושלם
**עדיפות**: גבוהה מאוד
**תיאור**:
- ת"ז עם checksum (אלגוריתם רשמי)
- טלפון ישראלי (10 ספרות, מתחיל ב-05)
- מספר רישוי (7-8 ספרות)
- טווחי תאריכים (לא לפני שנה X, לא אחרי היום)
- URL של Drive (בדיקה בסיסית)

#### 64. ❌ Service - Google Drive
**סטטוס**: לא הושלם
**עדיפות**: בינונית
**תיאור**:
- ולידציה של קישורי Drive
- בדיקת הרשאות שיתוף ("כל מי שיש לו קישור")
- תמיכה רק ב-PDF/JPG/PNG
- דחייה של פורמטים אחרים עם הסבר

#### 65. ❌ Service - ניהול ק"מ
**סטטוס**: לא הושלם
**עדיפות**: גבוהה
**תיאור**:
- בקרת חריגות (ירידה/קפיצה)
- שמירת היסטוריה מלאה
- התראות אוטומטיות למנהל
- דריסה רק למנהל-על עם רישום מיוחד

#### 66. ❌ Service - תביעות ביטוח
**סטטוס**: לא הושלם
**עדיפות**: בינונית
**תיאור**:
- קישור אוטומטי לתקלות/טיפולים
- מעקב סטטוסים
- סיכום שיחות כרונולוגי
- התראות על שינויי סטטוס

#### 67. ❌ Service - ארכיון
**סטטוס**: לא הושלם
**עדיפות**: נמוכה
**תיאור**:
- העברה אוטומטית של נתונים ישנים (24+ חודשים)
- חיפוש בארכיון
- שחזור מארכיון
- שמירת קישורים בין ישויות

---

### **ד. Backend - Scheduled Jobs (Cron)** (5 משימות)

#### 68. ❌ Job - פתיחת בקרה חודשית
**סטטוס**: לא הושלם
**עדיפות**: גבוהה מאוד
**תיאור**:
- ריצה ב-1 לכל חודש בשעה 09:00 (ערך להגדרה)
- יצירת רשומת MonthlyCheck לכל רוכב פעיל עם כלי
- התראה למזכיר על פתיחת חודש חדש
- טיפול ברוכבים שהצטרפו באמצע חודש (לפי מדיניות)

#### 69. ❌ Job - תוקפים שמסתיימים
**סטטוס**: לא הושלם
**עדיפות**: גבוהה
**תיאור**:
- בדיקה יומית בשעה 08:00
- התראה 30/14/7/1 ימים לפני פקיעת ביטוח/רישיון
- התראה למזכיר ולמנהלים
- סימון בכרטיס כלי/רוכב

#### 70. ❌ Job - העברה לארכיון
**סטטוס**: לא הושלם
**עדיפות**: נמוכה
**תיאור**:
- ריצה שבועית (ראשון בלילה)
- העברת נתונים סגורים מעל 24 חודשים
- שמירת קישורים בין ישויות
- רישום בלוג

#### 71. ❌ Job - גיבוי אוטומטי
**סטטוס**: לא הושלם
**עדיפות**: גבוהה
**תיאור**:
- ריצה שבועית (שישי בלילה)
- שמירת Snapshot של כל הטבלאות
- העלאה ל-Cloud Storage
- Retention: 4 שבועות
- התראה למנהל-על במקרה כשל

#### 72. ❌ Job - ניקוי לוגים ישנים
**סטטוס**: לא הושלם
**עדיפות**: נמוכה
**תיאור**:
- ריצה חודשית
- מחיקת לוגים מעל 6 חודשים (למעט Audit Log - נשמר לצמיתות)
- דחיסה של לוגים ישנים לפני מחיקה

---

### **ה. Frontend - דפים עיקריים** (25 משימות)

#### 73. ❌ דף Login
**סטטוס**: לא הושלם
**עדיפות**: גבוהה מאוד
**תיאור**:
- טופס כניסה: מייל + סיסמה
- ולידציות בצד לקוח
- הודעות שגיאה בעברית
- תמיכה RTL מלאה
- "זכור אותי" (אופציונלי)

#### 74. ❌ דף איפוס סיסמה
**סטטוס**: לא הושלם
**עדיפות**: בינונית
**תיאור**:
- **לא** Reset אוטומטי (בשלב ראשון)
- הודעה: "פנה למנהל/מזכיר לאיפוס סיסמה"
- בעתיד: אפשרות לאיפוס דרך מייל

#### 75. ❌ Dashboard ראשי
**סטטוס**: לא הושלם
**עדיפות**: גבוהה מאוד
**תיאור**:
- אריחי KPI:
  - מספר כלים פעילים
  - תקלות פתוחות
  - ביטוחים/רישיונות קרובים לפקיעה
  - רוכבים ללא בקרה חודשית
  - סך טיפולים בחודש
  - תביעות פתוחות
- גרפים (Recharts):
  - תקלות לפי חודש
  - עלויות טיפולים
  - סטטוסי כלים
- קיצורי דרך למשימות
- התראות אחרונות

#### 76. ❌ כרטיס רוכב מלא
**סטטוס**: לא הושלם
**עדיפות**: גבוהה מאוד
**תיאור**:
- **טאבים**:
  1. פרטי רוכב (זיהוי, כתובת, רישיון נהיגה)
  2. כלי נוכחי (אם יש)
  3. היסטוריית כלים (שיוכים קודמים)
  4. טפסים (בקרה, תקלות, טיפולים, תאונות)
  5. ציוד אישי (קסדה, מעיל וכו')
  6. משימות
  7. הערות פנימיות (למנהל-על)
  8. היסטוריית שינויים
- עריכה inline (כפתור "עריכה")
- כפתור "שליחת מייל ברוך הבא"
- כפתור "שליחת קישורים חשובים"
- צ'קליסט רוכב חדש

#### 77. ❌ כרטיס כלי מלא
**סטטוס**: לא הושלם
**עדיפות**: גבוהה מאוד
**תיאור**:
- **טאבים**:
  1. פרטי כלי (דגם, יצרן, מספר רישוי, ק"מ)
  2. רוכב משויך (נוכחי)
  3. תוקפים (ביטוח, רישיון רכב)
  4. בקרה חודשית
  5. תקלות (פתוחות + היסטוריה)
  6. טיפולים
  7. ציוד סיוע
  8. תביעות ביטוח
  9. משימות
  10. היסטוריה
- **פס אדום** בראש המסך אם יש תקלה חמורה
- עדכון ק"מ עם בקרת חריגות
- קישורים ל-Drive (רישיון, ביטוח, תמונות)
- כפתור "הצעת פעולות" (במקרה גניבה/אובדן)

#### 78. ❌ מסך רשימת רוכבים
**סטטוס**: לא הושלם
**עדיפות**: גבוהה
**תיאור**:
- טבלה עם Pagination (10/50/100)
- עמודות: שם, ת"ז, טלפון, כלי נוכחי, סטטוס
- חיפוש: שם, ת"ז, טלפון
- סינון: סטטוס, מחוז
- מיון לפי כל עמודה
- כפתורי פעולה: צפייה, עריכה, היסטוריה
- כפתור "רוכב חדש"

#### 79. ❌ מסך רשימת כלים
**סטטוס**: לא הושלם
**עדיפות**: גבוהה
**תיאור**:
- טבלה עם Pagination
- עמודות: מס' רישוי, דגם, רוכב, סטטוס, תוקף ביטוח
- חיפוש: מס' רישוי, מס' פנימי
- סינון: סטטוס, מחוז, סוג
- אינדיקטורים צבעוניים לתוקפים (ירוק/צהוב/אדום)
- סימון מיוחד לתקלות חמורות
- כפתור "כלי חדש"

#### 80. ❌ מסך בקרה חודשית - ניהולי
**סטטוס**: לא הושלם
**עדיפות**: גבוהה
**תיאור**:
- תצוגת כל הרוכבים עם כלים
- סטטוס בקרה לחודש נוכחי
- **צבעים**:
  - ללא צבע: 0-5 ימים
  - כתום: 5-10 ימים
  - אדום: 10+ ימים
- כפתור "תזכורת WhatsApp" ליד כל רוכב
- סינון: באיחור, הושלמו, כל הרוכבים
- ייצוא לExcel

#### 81. ❌ טופס בקרה חודשית לרוכב
**סטטוס**: לא הושלם
**עדיפות**: גבוהה
**תיאור**:
- פרטי רוכב וכלי (לא ניתנים לעריכה)
- **שדות דינמיים לפי סוג כלי**:
  - **קטנוע**: ק"מ, שמן, מים, לחץ אוויר (ספציפי), ברגי ארגז, מסילה
  - **אופנוע**: ק"מ, שמן, מים, לחץ אוויר ("לפי יצרן"), שימון שרשרת
- הערות כלליות (אופציונלי)
- קישורים לתמונות (אופציונלי)
- **נעילה** לאחר שליחה (אי אפשר לערוך)
- הודעת אישור

#### 82. ❌ מסך תקלות - ניהולי
**סטטוס**: לא הושלם
**עדיפות**: גבוהה
**תיאור**:
- טאבים: פתוחות / בטיפול / סגורות
- סינון: כלי, רוכב, סוג תקלה, תאריך
- סימון מיוחד לתקלות חמורות (לא ניתן לרכב)
- כפתורי פעולה: צפייה, אישור, דחייה, שינוי סטטוס, סגירה
- אפשרות ליצור משימה/טיפול מתוך תקלה

#### 83. ❌ טופס דיווח תקלה לרוכב
**סטטוס**: לא הושלם
**עדיפות**: גבוהה
**תיאור**:
- **שלב 1**: בחירה - במה הבעיה?
  - בקטנוע
  - בציוד אישי
  - בציוד סיוע
- **שלב 2 - אם בקטנוע**:
  - סוג תקלה (בחירה מרובה): בלמים, צמיגים, טיפול תקופתי, מיתוג, פנצ'ר, רעש וכו'
  - פירוט חופשי (חובה)
  - **"האם ניתן לרכב?"** כן / לא (חובה)
  - קישורים לתמונות/סרטונים
- **שלב 2 - אם בציוד אישי/סיוע**:
  - בחירת פריט/ים
  - פירוט תקלה
  - תמונות
- הודעת אישור + מספר תקלה

#### 84. ❌ טופס טיפול לרוכב
**סטטוס**: לא הושלם
**עדיפות**: גבוהה
**תיאור**:
- בדיקה: האם יש תקלות פתוחות על הכלי?
  - אם כן: "האם הטיפול קשור לתקלה?" (בחירה מרשימה)
- תאריך טיפול (חובה)
- ק"מ בעת הטיפול (חובה)
- תיאור טיפול (חובה)
- **מי שילם?** (חובה):
  - רוכב
  - צי לוג ידידים
  - השתתפות משותפת
  - אחר (עם הסבר)
- סוג טיפול (אם לא קשור לתקלה)
- איפה טופל (שם מוסך/עשה זאת בעצמך)
- קישורים לקבלות

#### 85. ❌ מסך עריכת טיפול (למנהל)
**סטטוס**: לא הושלם
**עדיפות**: בינונית
**תיאור**:
- הצגת כל השדות שהרוכב מילא (לא ניתנים לעריכה)
- שדות להשלמה:
  - **עלות טיפול כוללת** (חובה, כולל מע"מ)
  - קישורים נוספים לקבלות
  - הערות פנימיות
- כפתור "סגור טיפול"

#### 86. ❌ טופס סיום שיוך/החזרת כלי
**סטטוס**: לא הושלם
**עדיפות**: גבוהה מאוד
**תיאור**:
- זיהוי אוטומטי: רוכב + כלי
- תאריך ושעת סיום (ברירת מחדל: עכשיו)
- ק"מ בסיום (חובה)
- **בדיקת ציוד**:
  - ציוד אישי (קסדה, מעיל וכו') - Checkbox לכל פריט
  - ציוד סיוע (בוסטר, שרשרת וכו') - Checkbox לכל פריט
  - לכל פריט: קיים / חסר / לא רלוונטי
- קישורים לתמונות מצב כלי
- חתימה דיגיטלית (אופציונלי)
- **לאחר שליחה**:
  - טופס ננעל
  - חוסרים מועברים לאישור מנהל
  - אם מאושר → יצירת משימת לוגיסטיקה

#### 87. ❌ טופס תאונה/גניבה
**סטטוס**: לא הושלם
**עדיפות**: בינונית
**תיאור**:
- סוג אירוע: תאונה / גניבה / נזק אחר
- תאריך ושעה
- מיקום
- תיאור מפורט
- נפגעים? כן/לא
- דיווח למשטרה? כן/לא (אם כן - מספר תיק)
- קישורים למסמכים (דו"ח משטרה, תמונות)
- **קישור לתביעת ביטוח** (יצירה אוטומטית או קיימת)
- התראה למזכיר

#### 88. ❌ מסך ניהול משימות
**סטטוס**: לא הושלם
**עדיפות**: בינונית
**תיאור**:
- טאבים: המשימות שלי / כל המשימות (למנהלים)
- סינון לפי:
  - תפקיד (לוגיסטיקה/מנהלים)
  - סטטוס
  - עדיפות
  - רוכב/כלי
- כפתורי פעולה: שינוי סטטוס, עריכה, מחיקה
- כפתור "משימה חדשה" (ידנית)
- אינדיקציה למשימות שנוצרו אוטומטית (מתוך תהליכים)

#### 89. ❌ מסך ניהול ציוד ומלאי
**סטטוס**: לא הושלם
**עדיפות**: בינונית
**תיאור**:
- טאבים: מלאי מחסן / ציוד אישי / ציוד סיוע
- **מלאי מחסן**:
  - טבלה: פריט, כמות במלאי, סף התראה
  - תנועות (נמסר, הוחזר, חסר)
  - התראות על חסרים
  - כפתור "רישום תנועה"
- **ציוד אישי**: רשימת רוכבים + סטטוס ציוד
- **ציוד סיוע**: רשימת כלים + סטטוס ציוד

#### 90. ❌ מסך תביעות ביטוח
**סטטוס**: לא הושלם
**עדיפות**: בינונית
**תיאור**:
- רשימה עם סטטוסים (צבעים)
- עמודות: מספר תביעה, כלי, רוכב, סוג, סטטוס, תאריך
- סינון: סטטוס, כלי, תאריך
- כפתור "תביעה חדשה"
- **בעריכת תביעה**:
  - כל השדות (מספר, תאריך, סוג, סטטוס)
  - סכומים (נזק, השתתפות עצמית, שיפוי)
  - **סיכום שיחות** (Textarea רב-שורי, כרונולוגי)
  - קישורים לקבצים
  - קישורים לטיפולים קשורים

#### 91. ❌ מסך ניהול משתמשים (למנהל-על)
**סטטוס**: לא הושלם
**עדיפות**: גבוהה
**תיאור**:
- רשימת כל המשתמשים
- עמודות: שם, מייל, תפקיד, סטטוס, אזור
- כפתורי פעולה:
  - יצירת משתמש חדש
  - עריכת פרטים
  - שינוי תפקיד
  - הגדרת הרשאות
  - שינוי סיסמה
  - הקפאה/מחיקה
  - **נעילת חשבון** (כפתור ייעודי עם אזהרה)
  - **שחרור נעילה**
- **כפתור Impersonation** (כניסה כמשתמש)

#### 92. ❌ מסך עריכת תבניות מיילים (למנהל-על)
**סטטוס**: לא הושלם
**עדיפות**: בינונית
**תיאור**:
- רשימת תבניות
- עורך HTML (עם Preview)
- שדות דינמיים ({{riderName}}, {{vehicleNumber}} וכו')
- ניהול גרסאות (רשימת גרסאות + "חזור לגרסה")
- כפתור "שלח דוגמה למייל שלי"

#### 93. ❌ מסך צ'קליסט רוכב חדש
**סטטוס**: לא הושלם
**עדיפות**: בינונית
**תיאור**:
- רשימת פריטים:
  - פתיחת פוליסת ביטוח
  - העלאתה לדרייב
  - בדיקת ק"מ במסירה
  - החתמת טופס השאלת כלי
  - החתמת טופס השאלת ציוד
  - צילום רישיון נהיגה
  - פתיחת תיקיית רוכב בדרייב
  - קבלת תמונות כלי
  - הוספה לקבוצות וואטסאפ
  - **שליחת מייל "ברוך הבא"** (כפתור ייעודי)
  - **שליחת "קישורים חשובים"** (כפתור ייעודי)
- לכל פריט: Checkbox + תאריך השלמה
- התקדמות (% השלמה)

#### 94. ❌ מסך דוחות
**סטטוס**: לא הושלם
**עדיפות**: בינונית
**תיאור**:
- בחירת סוג דוח:
  - בקרה חודשית
  - תקלות
  - טיפולים
  - תביעות ביטוח
  - פיננסי (עלויות טיפולים)
- פילטרים (לפי הדוח):
  - תאריכים
  - מחוז
  - סוג כלי
  - רוכב
  - סטטוס
- חיפוש טקסטואלי
- מיון
- תצוגה ראשונית (טבלה/גרף)
- **ייצוא**: CSV / Excel

#### 95. ❌ מסך חיפוש בארכיון
**סטטוס**: לא הושלם
**עדיפות**: נמוכה
**תיאור**:
- גישה: מנהלים ומנהל-על בלבד
- חיפוש בנתונים מעל 24 חודשים
- פילטרים: סוג ישות, תאריכים, שדות
- תוצאות עם אפשרות שחזור

#### 96. ❌ מסך Audit Log (למנהל-על)
**סטטוס**: לא הושלם
**עדיפות**: בינונית
**תיאור**:
- רשימת כל הפעולות
- עמודות: תאריך, משתמש, פעולה, ישות, שדה, ערך קודם, ערך חדש, IP
- סינון: משתמש, ישות, תאריך, סוג פעולה
- סימון מיוחד לפעולות מנהל-על (דריסת ק"מ, מחיקות, Impersonation)
- ייצוא

#### 97. ❌ דשבורד בריאות מערכת (למנהל-על)
**סטטוס**: לא הושלם
**עדיפות**: נמוכה
**תיאור**:
- **אריחי סטטוס**:
  - שירותי מייל (פעיל/לא פעיל)
  - API חיצוניים (Google Drive, וכו')
  - עומס שרתים (CPU, RAM, Disk)
  - גיבוי אחרון (תאריך, סטטוס)
- **רשימת שגיאות אחרונות** (50 אחרונות)
- **לוג מערכת** (בזמן אמת - אופציונלי)

---

### **ו. Frontend - רכיבים משותפים** (15 משימות)

#### 98. ❌ רכיב חיפוש גלובלי
**סטטוס**: לא הושלם
**עדיפות**: גבוהה מאוד
**תיאור**:
- שדה חיפוש בכותרת (AppBar)
- חיפוש בת"ז, טלפון, מס' רישוי, שם
- תוצאות מיידיות (Autocomplete)
- קיצורי מקלדת (Ctrl+K)
- מעבר ישיר לכרטיס רוכב/כלי

#### 99. ❌ רכיב Pagination מתקדם
**סטטוס**: לא הושלם
**עדיפות**: גבוהה
**תיאור**:
- תמיכה 10/50/100 שורות לדף
- ביצועים מהירים (Virtual Scrolling אם נדרש)
- מעבר בין דפים
- קפיצה לדף ספציפי
- הצגת "מציג X-Y מתוך Z"

#### 100. ❌ רכיב העלאת קישורי Drive
**סטטוס**: לא הושלם
**עדיפות**: בינונית
**תיאור**:
- שדה URL
- ולידציה בסיסית (האם קישור Google Drive)
- הדרכה קצרה: "העלה קובץ לדרייב והדבק קישור"
- תמיכה בקישורים מרובים (מערך)
- תצוגת קישורים קיימים עם אפשרות מחיקה

#### 101. ❌ רכיב היסטוריית שינויים
**סטטוס**: לא הושלם
**עדיפות**: בינונית
**תיאור**:
- טבלה של שינויים לשדה/ישות
- עמודות: תאריך, משתמש, שדה, ערך קודם → ערך חדש, IP
- סינון לפי תאריך/שדה
- ייצוא

#### 102. ❌ רכיב תזכורת WhatsApp
**סטטוס**: לא הושלם
**עדיפות**: נמוכה
**תיאור**:
- כפתור "שלח תזכורת WhatsApp"
- פתיחת WhatsApp Web/App
- טקסט מוכן (ניתן לעריכה לפני שליחה)
- רישום בלוג שנשלחה תזכורת

#### 103. ❌ רכיב בדיקת ציוד
**סטטוס**: לא הושלם
**עדיפות**: גבוהה
**תיאור**:
- רשימת פריטים דינמית
- Checkbox/Radio לכל פריט:
  - קיים ✅
  - חסר ❌
  - לא רלוונטי ➖
- סיכום אוטומטי (X פריטים קיימים, Y חסרים)
- הדגשת חסרים באדום

#### 104. ❌ רכיב סטטוס בצבעים
**סטטוס**: לא הושלם
**עדיפות**: בינונית
**תיאור**:
- Chip/Badge צבעוני
- **בקרה חודשית**: ללא צבע/כתום/אדום
- **תקלות**: כחול(חדש)/צהוב(בטיפול)/ירוק(סגור)/אדום(חמור)
- **תביעות**: כחול(חדש)/צהוב(בבירור)/ירוק(שולם)/אדום(נדחה)
- **משימות**: אפור(חדש)/כחול(בביצוע)/ירוק(הושלם)

#### 105. ❌ רכיב התראות (Notification Bell)
**סטטוס**: לא הושלם
**עדיפות**: גבוהה
**תיאור**:
- פעמון בכותרת (AppBar)
- Badge עם מספר התראות לא נקראות
- לחיצה → תפריט עם רשימה
- כל התראה: כותרת, תאריך, קישור
- כפתורים: "סמן הכל כנקרא", "צפה בכל ההתראות"

#### 106. ❌ רכיב Form Builder (עבור מנהל-על)
**סטטוס**: לא הושלם
**עדיפות**: נמוכה
**תיאור**:
- Drag & Drop לשדות
- פאנל שדות זמינים (טקסט, מספר, תאריך וכו')
- הגדרת ולידציות לכל שדה
- Preview של הטופס
- שמירה ופרסום

#### 107. ❌ רכיב תוקפים (Validity Indicator)
**סטטוס**: לא הושלם
**עדיפות**: בינונית
**תיאור**:
- אינדיקטור ירוק/צהוב/אדום
- ירוק: תקף (30+ ימים)
- צהוב: מתקרב לפקיעה (7-30 ימים)
- אדום: פג תוקף או קרוב מאוד (<7 ימים)
- הצגת ימים שנותרו בטולטיפ

#### 108. ❌ רכיב חתימה דיגיטלית
**סטטוס**: לא הושלם
**עדיפות**: נמוכה
**תיאור**:
- Canvas לחתימה (ציור באצבע/עכבר)
- כפתור "נקה"
- שמירה כתמונה (Base64/PNG)
- תצוגת חתימה שמורה

#### 109. ❌ רכיב טבלה מתקדמת
**סטטוס**: לא הושלם
**עדיפות**: גבוהה
**תיאור**:
- מיון לפי עמודות
- סינון inline
- Pagination
- בחירת שורות (Checkbox)
- פעולות על שורות מסומנות
- Export (CSV/Excel/Print)
- Sticky Header

#### 110. ❌ רכיב KPI Card
**סטטוס**: לא הושלם
**עדיפות**: בינונית
**תיאור**:
- כרטיס עם:
  - מספר גדול (הערך)
  - כותרת
  - אייקון (MUI Icons)
  - צבע רקע
  - שינוי מהחודש/שבוע הקודם (חץ למעלה/למטה)
- לחיצה → ניווט לדוח מפורט

#### 111. ❌ רכיב Audit Trail (לישות)
**סטטוס**: לא הושלם
**עדיפות**: בינונית
**תיאור**:
- טבלת שינויים עבור ישות (רוכב/כלי/תקלה וכו')
- פילטר לפי שדה, תאריך, משתמש
- תצוגת Diff (ערך קודם → ערך חדש)
- ייצוא

#### 112. ❌ רכיב אישור מחיקה
**סטטוס**: לא הושלם
**עדיפות**: גבוהה
**תיאור**:
- Dialog עם אזהרה חמורה
- טקסט: "הפעולה אינה ניתנת לשחזור בקלות"
- שדה טקסט: "הקלד 'מאשר מחיקה' כדי להמשיך"
- שדה הסבר (חובה)
- כפתורים: "ביטול" / "מחק"

---

### **ז. תשתיות ואבטחה** (10 משימות)

#### 113. ✅ אבטחה - Hash סיסמאות
**סטטוס**: הושלם
**תיאור**: bcrypt עם Salt

#### 114. 🟡 אבטחה - דרישות סיסמה
**סטטוס**: חלקי
**עדיפות**: גבוהה מאוד
**נדרש**:
- [x] Hash עם bcrypt
- [ ] אכיפת דרישות:
  - לפחות 10 תווים
  - אות גדולה + קטנה
  - מספר
  - תו מיוחד
- [ ] הודעה ברורה בעברית

#### 115. ✅ אבטחה - JWT
**סטטוס**: הושלם
**תיאור**: Token עם Expiry

#### 116. ❌ אבטחה - Refresh Token
**סטטוס**: לא הושלם
**עדיפות**: בינונית
**תיאור**:
- מנגנון Refresh Token
- חידוש אוטומטי לפני Expiry
- אבטחה מול התקפות

#### 117. ❌ אבטחה - Rate Limiting
**סטטוס**: לא הושלם
**עדיפות**: גבוהה
**תיאור**:
- הגבלת בקשות ל-API (100/דקה)
- מניעת Brute Force על Login (5 ניסיונות/דקה)
- הודעה: "נסה שוב בעוד X שניות"

#### 118. ✅ אבטחה - CORS
**סטטוס**: הושלם
**תיאור**: מוגדר לדומיינים מורשים

#### 119. ✅ אבטחה - Helmet
**סטטוס**: הושלם
**תיאור**: הגנות HTTP Headers

#### 120. ❌ אבטחה - Input Validation
**סטטוס**: חלקי
**עדיפות**: גבוהה מאוד
**נדרש**:
- [x] ולידציה בסיסית
- [ ] ולידציה מלאה בשרת לכל קלט
- [ ] מניעת SQL Injection, XSS, Command Injection
- [ ] Sanitization של HTML (אם יש)
- [ ] בדיקת גודל קבצים

#### 121. ❌ אבטחה - HTTPS
**סטטוס**: לא הושלם
**עדיפות**: גבוהה מאוד
**תיאור**:
- אכיפת HTTPS בייצור
- Redirect אוטומטי מ-HTTP ל-HTTPS
- תעודת SSL/TLS

#### 122. ❌ גיבויים - מערכת אוטומטית
**סטטוס**: לא הושלם
**עדיפות**: גבוהה
**תיאור**:
- Job שבועי (Cron)
- Dump של MongoDB/Firestore
- שמירה ל-Cloud Storage (Google Cloud, AWS S3)
- Retention: 4 שבועות
- התראה למנהל-על במקרה כשל

#### 123. ❌ גיבויים - שחזור
**סטטוס**: לא הושלם
**עדיפות**: בינונית
**תיאור**:
- תהליך שחזור מתועד (מדריך)
- בדיקת גיבוי תקופתית (Drill)
- כפתור שחזור ב-UI (למנהל-על)

#### 124. ❌ לוגים - ניהול ורישום
**סטטוס**: חלקי
**עדיפות**: בינונית
**נדרש**:
- [x] Morgan לבקשות HTTP
- [ ] Winston ללוגים מובנים
- [ ] רמות: error, warn, info, debug
- [ ] שמירה לקבצים (לוג יומי)
- [ ] ניקוי אוטומטי (לוגים מעל 6 חודשים)

---

### **ח. Testing** (10 משימות)

#### 125. ❌ Unit Tests - מודלים
**סטטוס**: לא הושלם
**עדיפות**: בינונית
**תיאור**:
- בדיקת ולידציות (ת"ז, טלפון, מס' רישוי)
- בדיקת Hooks (pre-save וכו')
- כלי: Jest / Mocha

#### 126. ❌ Unit Tests - Services
**סטטוס**: לא הושלם
**עדיפות**: בינונית
**תיאור**:
- בדיקת לוגיקה עסקית
- Mocking של קריאות חיצוניות
- כיסוי 80%+

#### 127. ❌ Integration Tests - API Endpoints
**סטטוס**: לא הושלם
**עדיפות**: גבוהה
**תיאור**:
- בדיקת כל ה-Routes
- בדיקת הרשאות (401/403)
- בדיקת Response Structure
- כלי: Supertest

#### 128. ❌ Integration Tests - Jobs
**סטטוס**: לא הושלם
**עדיפות**: בינונית
**תיאור**:
- בדיקת Cron Jobs
- סימולציה של תאריכים
- בדיקת תוצאות (נתונים נוצרו, מיילים נשלחו)

#### 129. ❌ E2E Tests - תהליך שיוך רוכב
**סטטוס**: לא הושלם
**עדיפות**: גבוהה
**תיאור**:
- יצירת רוכב
- יצירת כלי
- שיוך רוכב לכלי
- בקרה חודשית נוצרת אוטומטית
- כלי: Playwright / Cypress

#### 130. ❌ E2E Tests - תהליך תקלה וטיפול
**סטטוס**: לא הושלם
**עדיפות**: גבוהה
**תיאור**:
- רוכב פותח תקלה
- מנהל מאשר
- רוכב מדווח על טיפול (קשור לתקלה)
- מנהל סוגר
- כל הסטטוסים משתנים נכון

#### 131. ❌ E2E Tests - תהליך החזרת כלי
**סטטוס**: לא הושלם
**עדיפות**: בינונית
**תיאור**:
- מילוי טופס החזרה
- סימון חוסרים
- מנהל מאשר
- משימת לוגיסטיקה נוצרת
- שיוך מסתיים

#### 132. ❌ Performance Tests - חיפושים
**סטטוס**: לא הושלם
**עדיפות**: בינונית
**תיאור**:
- בדיקת זמני תגובה (<1 שנייה)
- חיפושים בטבלאות גדולות
- Indexes במקומות הנכונים

#### 133. ❌ Performance Tests - Dashboard
**סטטוס**: לא הושלם
**עדיפות**: בינונית
**תיאור**:
- טעינת KPIs מהירה (<2 שניות)
- אופטימיזציה של שאילתות
- Caching אם נדרש

#### 134. ❌ Security Tests - Penetration Testing
**סטטוס**: לא הושלם
**עדיפות**: גבוהה
**תיאור**:
- בדיקת פרצות
- OWASP Top 10
- SQL Injection, XSS, CSRF
- כלי: OWASP ZAP / Burp Suite

---

### **ט. Documentation ו-Deployment** (10 משימות)

#### 135. ❌ תיעוד - API (Swagger/OpenAPI)
**סטטוס**: לא הושלם
**עדיפות**: בינונית
**תיאור**:
- תיעוד כל ה-Endpoints
- דוגמאות Request/Response
- סכמות (Schemas)
- אינטגרציה עם Swagger UI

#### 136. ❌ תיעוד - מדריך מתכנת
**סטטוס**: לא הושלם
**עדיפות**: נמוכה
**תיאור**:
- ארכיטקטורה כללית
- מבנה תיקיות
- Naming Conventions
- איך להוסיף מודל חדש
- איך להוסיף Route חדש
- איך להריץ בסביבת Dev

#### 137. ❌ תיעוד - מדריך משתמש (מנהלים)
**סטטוס**: לא הושלם
**עדיפות**: גבוהה
**תיאור**:
- כניסה למערכת
- ניהול רוכבים וכלים
- אישור תקלות
- השלמת טיפולים
- צפייה בדוחות
- ייצוא נתונים
- צילומי מסך

#### 138. ❌ תיעוד - מדריך משתמש (רוכבים)
**סטטוס**: לא הושלם
**עדיפות**: גבוהה
**תיאור**:
- כניסה למערכת
- מילוי בקרה חודשית
- דיווח תקלה
- דיווח טיפול
- דיווח תאונה/גניבה
- שאלות נפוצות (FAQ)

#### 139. ❌ תיעוד - מדריך מנהל-על
**סטטוס**: לא הושלם
**עדיפות**: בינונית
**תיאור**:
- ניהול משתמשים והרשאות
- עריכת תבניות מיילים
- Impersonation
- נעילת חשבונות
- דשבורד בריאות מערכת
- גיבוי ושחזור
- Audit Log

#### 140. ❌ Deploy - הגדרת סביבת Production
**סטטוס**: לא הושלם
**עדיפות**: גבוהה מאוד
**תיאור**:
- משתני סביבה (.env.production)
- HTTPS
- CORS מוגבל
- Rate Limiting
- אבטחה מוגברת

#### 141. ❌ Deploy - CI/CD Pipeline
**סטטוס**: לא הושלם
**עדיפות**: בינונית
**תיאור**:
- GitHub Actions / GitLab CI
- אוטומציה לבניה (Build)
- הרצת בדיקות אוטומטיות
- Deploy אוטומטי ל-Production
- Rollback אוטומטי במקרה כשל

#### 142. ❌ Deploy - Monitoring ו-Alerts
**סטטוס**: לא הושלם
**עדיפות**: בינונית
**תיאור**:
- ניטור שרתים (CPU, RAM, Disk)
- ניטור שגיאות (Sentry / Rollbar)
- התראות על:
  - שגיאות קריטיות
  - שרת לא זמין
  - בסיס נתונים לא זמין
  - זמני תגובה איטיים

#### 143. ❌ Deploy - Rollback Plan
**סטטוס**: לא הושלם
**עדיפות**: בינונית
**תיאור**:
- תהליך חזרה לגרסה קודמת
- שמירת גרסאות קודמות
- בדיקה מהירה (Smoke Test)

#### 144. ❌ הדרכה - מנהל-על ומזכיר
**סטטוס**: לא הושלם
**עדיפות**: גבוהה מאוד
**תיאור**:
- הדרכה פרונטלית (2-3 שעות)
- מסמכי עזר (PDF/וידאו)
- תרגול מעשי
- שאלות ותשובות

---

## 📈 עדיפויות ומסלול פיתוח מומלץ

### **Phase 1 - תשתיות קריטיות** (2-3 שבועות)
1. השלמת אבטחה: Hash סיסמאות, דרישות סיסמה, Rate Limiting, Input Validation
2. מודל Equipment מלא
3. מערכת ניהול קילומטראז' מתקדמת
4. Middleware: הרשאות מתקדמות, Audit Log אוטומטי, שגיאות בעברית
5. Service: וולידציות מתקדמות, ניהול ק"מ

### **Phase 2 - API Endpoints עיקריים** (3-4 שבועות)
6. השלמת API רוכבים וכלים (CRUD מלא + חיפוש)
7. API שיוכים (יצירה, סיום, היסטוריה)
8. API בקרה חודשית מלא
9. API תקלות מלא
10. API טיפולים מלא
11. API ציוד ומלאי
12. API חיפוש גלובלי

### **Phase 3 - Frontend דפים עיקריים** (4-5 שבועות)
13. דף Login ואיפוס סיסמה
14. Dashboard ראשי עם KPIs
15. כרטיס רוכב מלא
16. כרטיס כלי מלא
17. מסך רשימת רוכבים וכלים
18. מסך בקרה חודשית + טופס לרוכב
19. מסך תקלות + טופס דיווח
20. טופס טיפול
21. טופס החזרת כלי
22. רכיבים משותפים: חיפוש גלובלי, Pagination, בדיקת ציוד

### **Phase 4 - פיצ'רים מתקדמים** (3-4 שבועות)
23. מודל Notification + API + רכיב פעמון
24. Service מיילים + מודל EmailTemplate
25. API התראות
26. API תביעות ביטוח + מסך ניהול
27. טופס תאונה/גניבה
28. API משימות + מסך ניהול
29. מסך ניהול ציוד ומלאי
30. מסך צ'קליסט רוכב חדש

### **Phase 5 - ניהול ואדמין** (2-3 שבועות)
31. מסך ניהול משתמשים
32. API Impersonation + נעילת חשבונות
33. הרשאות אזוריות (מודל + API + Middleware)
34. מסך עריכת תבניות מיילים
35. מסך Audit Log
36. דשבורד בריאות מערכת

### **Phase 6 - Jobs ואוטומציות** (1-2 שבועות)
37. Job פתיחת בקרה חודשית
38. Job תוקפים שמסתיימים
39. Job גיבוי אוטומטי
40. Job העברה לארכיון
41. Job ניקוי לוגים

### **Phase 7 - דוחות וארכיון** (2 שבועות)
42. API דוחות + מסך דוחות
43. מערכת ארכיון (מודל + API + מסך חיפוש)
44. ייצוא ל-CSV/Excel

### **Phase 8 - Testing** (2-3 שבועות)
45. Unit Tests למודלים ו-Services
46. Integration Tests ל-API
47. E2E Tests לתהליכים קריטיים
48. Performance Tests
49. Security Tests

### **Phase 9 - תיעוד ו-Deploy** (1-2 שבועות)
50. תיעוד API (Swagger)
51. מדריכי משתמש
52. הגדרת Production
53. CI/CD Pipeline
54. Monitoring

### **Phase 10 - הדרכה והשקה** (1 שבוע)
55. הדרכת מנהל-על ומזכיר
56. תיקון באגים אחרון
57. השקה!

---

## 🎯 סיכום והערות

### מצב נוכחי:
- ✅ **הושלמו**: ~35 משימות (30%)
- 🟡 **חלקי**: ~10 משימות
- ❌ **לא הושלמו**: ~70 משימות

### זמן משוער להשלמה:
- **אופטימי** (מפתח מנוסה full-time): 4-5 חודשים
- **ריאלי** (צוות קטן): 6-8 חודשים
- **שמרני** (פיתוח איטי + תיקוני באגים): 10-12 חודשים

### המלצות:
1. **לעבוד בשלבים** - לא לנסות לעשות הכל בבת אחת
2. **MVP ראשון** - להתמקד בפיצ'רים הכי קריטיים (Phase 1-3)
3. **בדיקות מתמשכות** - לא להמתין לסוף
4. **משוב מהמשתמשים** - לבדוק עם מזכיר היחידה אחרי כל Phase
5. **תיעוד שוטף** - לא להשאיר לסוף

### נקודות קריטיות:
- ⚠️ **אבטחה** - חובה להשלים לפני Production
- ⚠️ **גיבויים** - חובה מהיום הראשון בייצור
- ⚠️ **Audit Log** - קריטי לשקיפות ומעקב
- ⚠️ **מערכת ק"מ** - לוגיקה מורכבת, דורשת בדיקות מעמיקות

---

**עודכן לאחרונה**: 03/01/2026
**גרסת מסמך**: 1.0
